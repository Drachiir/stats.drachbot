{% extends 'base.html' %}

{% block content %}
<div style="padding-top: 15px;">
    <img style="float:left; padding-right: 20px;" src="{{get_cdn_image(specific_key, header_title)}}">
    <r style="font-size: 1.5rem;" class="navbar-brand" href="#">{{get_unit_name(specific_key)}} Stats</r>
    <div style="float:right;">
        <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
        Elo
        </button>
        <ul class="dropdown-menu">
            {% for i in elo_brackets %}
            <li><a class="dropdown-item" href="/{{stats}}/{{patch}}/{{i}}/{{specific_key}}">{{i}}+</a></li>
            {% endfor %}
        </ul>
        <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
        Patch
        </button>
        <ul class="dropdown-menu">
            {% for p in patch_list %}
            <li><a class="dropdown-item" href="/{{stats}}/{{p}}/{{elo}}/{{specific_key}}">v{{p}}</a></li>
            {% endfor %}
        </ul>
    </div>
    <br>
    <r style="font-size: 1rem;" > <b>{{human_format(data[specific_key]['Count'])}}</b> Games | Winrate: <b>{{custom_winrate([data[specific_key]['Wins'], data[specific_key]['Count']])}}%</b> | <b>v{{patch}}</b></r>
    {# HEADER 1 #}
    {% for header in sub_headers%}
        <table style= "display: inline-block; overflow: auto; padding-top: 10px" class="table" id="myTable{{ loop.index }}">
        <tbody>
        {% set header_dict = sort_dict(data[specific_key][header[1]], 'Count') %}
        <tr>
            <th style="width: 7%;"><r>{{header[0]}}</r></th>
            {% for key in header_dict %}
                {% if key in mm_list %}
                    <td style="width: 7%;"><a href="/{{header[2]}}/{{patch}}/{{elo}}/{{key}}"><img src="{{get_cdn_image(key, header[0])}}"></a></td>
                {% else %}
                    <td style="width: 7%;"><a href="/{{header[2]}}/{{patch}}/{{elo}}/{{key|lower}}"><img src="{{get_cdn_image(key, header[0])}}"></a></td>
                {% endif %}
            {% endfor %}
        </tr>
        {# HEADER 1 KEYS #}
        {% for k in header_keys %}
            <tr>
                <th><r>{{k}}</r></th>
            {% for key in header_dict %}
                <td>{{get_key_value(header_dict, key, k, data[specific_key]['Count'])}}</td>
            {% endfor %}
            </tr>
        {% endfor %}
        </tbody>
        </table>
    {% endfor %}
</div>
{% endblock %}